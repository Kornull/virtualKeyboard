(()=>{"use strict";const e={ru:[{small:"ё",shift:"Ё",keyCode:"Backquote"},{small:"1",shift:"!",keyCode:"Digit1"},{small:"2",shift:'"',keyCode:"Digit2"},{small:"3",shift:"№",keyCode:"Digit3"},{small:"4",shift:";",keyCode:"Digit4"},{small:"5",shift:"%",keyCode:"Digit5"},{small:"6",shift:":",keyCode:"Digit6"},{small:"7",shift:"?",keyCode:"Digit7"},{small:"8",shift:"*",keyCode:"Digit8"},{small:"9",shift:"(",keyCode:"Digit9"},{small:"0",shift:")",keyCode:"Digit0"},{small:"-",shift:"_",keyCode:"Minus"},{small:"=",shift:"+",keyCode:"Equal"},{small:"backspace",shift:null,keyCode:"Backspace"},{small:"tab",shift:null,keyCode:"Tab"},{small:"й",shift:"Й",keyCode:"KeyQ"},{small:"ц",shift:"Ц",keyCode:"KeyW"},{small:"у",shift:"У",keyCode:"KeyE"},{small:"к",shift:"К",keyCode:"KeyR"},{small:"е",shift:"Е",keyCode:"KeyT"},{small:"н",shift:"Н",keyCode:"KeyY"},{small:"г",shift:"Г",keyCode:"KeyU"},{small:"ш",shift:"Ш",keyCode:"KeyI"},{small:"щ",shift:"Щ",keyCode:"KeyO"},{small:"з",shift:"З",keyCode:"KeyP"},{small:"х",shift:"Х",keyCode:"BracketLeft"},{small:"ъ",shift:"Ъ",keyCode:"BracketRight"},{small:"\\",shift:"/",keyCode:"Backslash"},{small:"caps lock",shift:null,keyCode:"CapsLock"},{small:"ф",shift:"Ф",keyCode:"KeyA"},{small:"ы",shift:"Ы",keyCode:"KeyS"},{small:"в",shift:"В",keyCode:"KeyD"},{small:"а",shift:"А",keyCode:"KeyF"},{small:"п",shift:"П",keyCode:"KeyG"},{small:"р",shift:"Р",keyCode:"KeyH"},{small:"о",shift:"О",keyCode:"KeyJ"},{small:"л",shift:"Л",keyCode:"KeyK"},{small:"д",shift:"Д",keyCode:"KeyL"},{small:"ж",shift:"Ж",keyCode:"Semicolon"},{small:"э",shift:"Э",keyCode:"Quote"},{small:"enter",shift:null,keyCode:"Enter"},{small:"del",shift:null,keyCode:"Delete"},{small:"shift",shift:null,keyCode:"ShiftLeft"},{small:"я",shift:"Я",keyCode:"KeyZ"},{small:"ч",shift:"Ч",keyCode:"KeyX"},{small:"с",shift:"С",keyCode:"KeyC"},{small:"м",shift:"М",keyCode:"KeyV"},{small:"и",shift:"И",keyCode:"KeyB"},{small:"т",shift:"Т",keyCode:"KeyN"},{small:"ь",shift:"Ь",keyCode:"KeyM"},{small:"б",shift:"Б",keyCode:"Comma"},{small:"ю",shift:"Ю",keyCode:"Period"},{small:".",shift:",",keyCode:"Slash"},{small:"shift",shift:null,keyCode:"ShiftRight"},{small:"ctrl",shift:null,keyCode:"ControlLeft"},{small:"win",shift:null,keyCode:"MetaLeft"},{small:"alt",shift:null,keyCode:"AltLeft"},{small:"",shift:null,keyCode:"Space"},{small:"alt",shift:null,keyCode:"AltRight"},{small:"ctrl",shift:null,keyCode:"ControlRight"},{small:"↑",shift:null,keyCode:"ArrowUp"},{small:"↓",shift:null,keyCode:"ArrowDown"},{small:"←",shift:null,keyCode:"ArrowLeft"},{small:"→",shift:null,keyCode:"ArrowRight"}],en:[{small:"`",shift:"~",keyCode:"Backquote"},{small:"1",shift:"!",keyCode:"Digit1"},{small:"2",shift:"@",keyCode:"Digit2"},{small:"3",shift:"#",keyCode:"Digit3"},{small:"4",shift:"$",keyCode:"Digit4"},{small:"5",shift:"%",keyCode:"Digit5"},{small:"6",shift:"^",keyCode:"Digit6"},{small:"7",shift:"&",keyCode:"Digit7"},{small:"8",shift:"*",keyCode:"Digit8"},{small:"9",shift:"(",keyCode:"Digit9"},{small:"0",shift:")",keyCode:"Digit0"},{small:"-",shift:"_",keyCode:"Minus"},{small:"=",shift:"+",keyCode:"Equal"},{small:"backspace",shift:null,keyCode:"Backspace"},{small:"tab",shift:null,keyCode:"Tab"},{small:"q",shift:"Q",keyCode:"KeyQ"},{small:"w",shift:"W",keyCode:"KeyW"},{small:"e",shift:"E",keyCode:"KeyE"},{small:"r",shift:"R",keyCode:"KeyR"},{small:"t",shift:"T",keyCode:"KeyT"},{small:"y",shift:"Y",keyCode:"KeyY"},{small:"u",shift:"U",keyCode:"KeyU"},{small:"i",shift:"I",keyCode:"KeyI"},{small:"o",shift:"O",keyCode:"KeyO"},{small:"p",shift:"P",keyCode:"KeyP"},{small:"[",shift:"{",keyCode:"BracketLeft"},{small:"]",shift:"}",keyCode:"BracketRight"},{small:"\\",shift:"|",keyCode:"Backslash"},{small:"caps lock",shift:null,keyCode:"CapsLock"},{small:"a",shift:"A",keyCode:"KeyA"},{small:"s",shift:"S",keyCode:"KeyS"},{small:"d",shift:"D",keyCode:"KeyD"},{small:"f",shift:"F",keyCode:"KeyF"},{small:"g",shift:"G",keyCode:"KeyG"},{small:"h",shift:"H",keyCode:"KeyH"},{small:"j",shift:"J",keyCode:"KeyJ"},{small:"k",shift:"K",keyCode:"KeyK"},{small:"l",shift:"L",keyCode:"KeyL"},{small:";",shift:":",keyCode:"Semicolon"},{small:"'",shift:'"',keyCode:"Quote"},{small:"enter",shift:null,keyCode:"Enter"},{small:"del",shift:null,keyCode:"Delete"},{small:"shift",shift:null,keyCode:"ShiftLeft"},{small:"z",shift:"Z",keyCode:"KeyZ"},{small:"x",shift:"X",keyCode:"KeyX"},{small:"c",shift:"C",keyCode:"KeyC"},{small:"v",shift:"V",keyCode:"KeyV"},{small:"b",shift:"B",keyCode:"KeyB"},{small:"n",shift:"N",keyCode:"KeyN"},{small:"m",shift:"M",keyCode:"KeyM"},{small:",",shift:"<",keyCode:"Comma"},{small:".",shift:">",keyCode:"Period"},{small:"/",shift:"?",keyCode:"Slash"},{small:"shift",shift:null,keyCode:"ShiftRight"},{small:"ctrl",shift:null,keyCode:"ControlLeft"},{small:"win",shift:null,keyCode:"MetaLeft"},{small:"alt",shift:null,keyCode:"AltLeft"},{small:"",shift:null,keyCode:"Space"},{small:"alt",shift:null,keyCode:"AltRight"},{small:"ctrl",shift:null,keyCode:"ControlRight"},{small:"↑",shift:null,keyCode:"ArrowUp"},{small:"↓",shift:null,keyCode:"ArrowDown"},{small:"←",shift:null,keyCode:"ArrowLeft"},{small:"→",shift:null,keyCode:"ArrowRight"}]};let t=0;let s=(l="keyLang",JSON.parse(localStorage.getItem(l)));var l;null===s&&(!function(e,t){localStorage.setItem(e,JSON.stringify(t))}("keyLang","ru"),s="ru");const i=new class{constructor(e,t){this.keys=e,this.lang=t,this.main=document.createElement("div"),this.main.classList.add("main"),this.keyboard=document.createElement("div"),this.keyboard.classList.add("keyboard"),this.key=null,this.case=null}addInput(){this.text=document.createElement("textarea");this.text.rows="5",this.main.appendChild(this.text),document.body.appendChild(this.main)}init(t){this.keyboard.innerHTML="",this.btns=[],this.lang=t;let s=0,l=0;this.key=document.createElement("div"),this.key.classList.add("keyboards__key");const i=document.createElement("div");i.classList.add("arrows"),this.keys.forEach((t=>{const a=[],o=document.createElement("div");o.classList.add("row",`row-${s+=1}`),t.forEach((t=>{e[this.lang].forEach((e=>{if(e.keyCode===t)if(this.key=document.createElement("div"),this.key.classList.add("keyboards__key"),this.key.id=e.keyCode.toLowerCase(),"space"===this.key.id&&(this.key.style.width="510px"),"capslock"===this.key.id&&this.key.classList.add("keyboards__key--caps"),this.key.id.match(/backspace|shift|enter/)&&(this.key.style.width="180px"),this.key.id.match(/alt|meta|control/)&&(this.key.style.width="68px"),this.key.id.match(/caps|enter/)&&(this.key.style.width="140px"),this.key.id.match(/arrow/)){this.key.style.width="53px",this.key.style.height="23px",this.key.style.padding="5px",this.key.innerHTML=e.small;const t=document.createElement("div");t.classList.add(`arrou-${l+=1}`),t.append(this.key),i.appendChild(t),this.btns.push(this.key),a.push(this.key.id)}else this.btns.push(this.key),this.key.innerHTML=e.small,o.appendChild(this.key),o.appendChild(i),a.push(this.key.id)})),this.keyboard.appendChild(o)})),o.style.gridTemplateColumns=`repeat(${a.length}, 1fr)`})),this.main.appendChild(this.keyboard)}addRunKey(e){this.text.focus(),e.stopPropaganation&&e.stopPropaganation();const{code:s,type:l}=e;this.btns.forEach((i=>{i.id===s.toLowerCase()&&(l.match(/keydown|mousedown/)?l.match(/down/)&&(l.match(/keydown/)&&e.preventDefault(),i.classList.add("active"),i.id.match(/key|dig|bracket|slash|comma|period|quote|semi|arrow|equal|min/)&&(this.text.value+=i.textContent),i.id.match(/tab/)&&(this.text.value+="    "),i.id.match(/ent/)&&(this.text.value+="\n"),i.id.match(/space/)&&(this.text.value+=" "),i.id.match(/caps/)&&(t+=1,this.capsText(t),t%2==0&&(t=0)),i.id.match(/shift/)&&(1===t?this.textUpLow("keyup"):this.textUpLow(l))):l.match(/up/)&&(i.id.match(/shift/)&&(1===t?this.textUpLow("keydown"):this.textUpLow(l)),i.classList.remove("active"),t%2!=0?i.id.match(/caps/)&&i.classList.add("active"):i.classList.remove("active")))}))}textUpLow=s=>{this.btns.forEach((l=>{e[this.lang].forEach((e=>{l.id.match(/key|dig|bracket|slash|comma|period|quote|semi|equal|min/)&&l.id===e.keyCode.toLowerCase()&&(s.match(/down/)?(l.innerHTML=e.shift,1===t&&"en"===this.lang?(l.id.match(/digit|min|equ|bracket|comma|period|quote|semi|slash/)&&(l.innerHTML=e.small),l.id.match(/key/)&&(l.innerHTML=e.shift)):1===t&&"ru"===this.lang&&(l.id.match(/key|backquote|bracket|comma|period|quote|semi/)&&(l.innerHTML=e.shift),l.id.match(/digit|min|equ|slash/)&&(l.innerHTML=e.small))):s.match(/up/)&&(l.innerHTML=e.small,1===t&&"en"===this.lang?l.id.match(/key/)&&(l.innerHTML=e.small):1===t&&"ru"===this.lang&&l.id.match(/key|backquote|bracket|comma|period|quote|semi/)&&(l.innerHTML=e.small)))}))}))};capsText=t=>{this.btns.forEach((s=>{e[this.lang].forEach((e=>{"ru"===this.lang?s.id.match(/key|bracket|comma|period|quote|semi/)&&s.id===e.keyCode.toLowerCase()&&(s.innerHTML=t%2!=0?e.shift:e.small):s.id.match(/key/)&&s.id===e.keyCode.toLowerCase()&&(s.innerHTML=t%2!=0?e.shift:e.small)}))}))}}([["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"]]);window.addEventListener("DOMContentLoaded",(()=>{i.addInput(),i.init(s)})),document.addEventListener("keydown",(e=>i.addRunKey(e))),document.addEventListener("keyup",(e=>i.addRunKey(e))),document.addEventListener("mousedown",(e=>i.addRunKey({code:e.target.id,type:e.type}))),document.addEventListener("mouseup",(e=>i.addRunKey({code:e.target.id,type:e.type})))})();