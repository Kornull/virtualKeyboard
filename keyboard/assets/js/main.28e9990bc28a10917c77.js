(()=>{"use strict";function e(e,t){localStorage.setItem(e,JSON.stringify(t))}function t(e){return JSON.parse(localStorage.getItem(e))}const s={ru:[{small:"ё",shift:"Ё",keyCode:"Backquote"},{small:"1",shift:"!",keyCode:"Digit1"},{small:"2",shift:'"',keyCode:"Digit2"},{small:"3",shift:"№",keyCode:"Digit3"},{small:"4",shift:";",keyCode:"Digit4"},{small:"5",shift:"%",keyCode:"Digit5"},{small:"6",shift:":",keyCode:"Digit6"},{small:"7",shift:"?",keyCode:"Digit7"},{small:"8",shift:"*",keyCode:"Digit8"},{small:"9",shift:"(",keyCode:"Digit9"},{small:"0",shift:")",keyCode:"Digit0"},{small:"-",shift:"_",keyCode:"Minus"},{small:"=",shift:"+",keyCode:"Equal"},{small:"backspace",shift:null,keyCode:"Backspace"},{small:"tab",shift:null,keyCode:"Tab"},{small:"й",shift:"Й",keyCode:"KeyQ"},{small:"ц",shift:"Ц",keyCode:"KeyW"},{small:"у",shift:"У",keyCode:"KeyE"},{small:"к",shift:"К",keyCode:"KeyR"},{small:"е",shift:"Е",keyCode:"KeyT"},{small:"н",shift:"Н",keyCode:"KeyY"},{small:"г",shift:"Г",keyCode:"KeyU"},{small:"ш",shift:"Ш",keyCode:"KeyI"},{small:"щ",shift:"Щ",keyCode:"KeyO"},{small:"з",shift:"З",keyCode:"KeyP"},{small:"х",shift:"Х",keyCode:"BracketLeft"},{small:"ъ",shift:"Ъ",keyCode:"BracketRight"},{small:"\\",shift:"/",keyCode:"Backslash"},{small:"caps lock",shift:null,keyCode:"CapsLock"},{small:"ф",shift:"Ф",keyCode:"KeyA"},{small:"ы",shift:"Ы",keyCode:"KeyS"},{small:"в",shift:"В",keyCode:"KeyD"},{small:"а",shift:"А",keyCode:"KeyF"},{small:"п",shift:"П",keyCode:"KeyG"},{small:"р",shift:"Р",keyCode:"KeyH"},{small:"о",shift:"О",keyCode:"KeyJ"},{small:"л",shift:"Л",keyCode:"KeyK"},{small:"д",shift:"Д",keyCode:"KeyL"},{small:"ж",shift:"Ж",keyCode:"Semicolon"},{small:"э",shift:"Э",keyCode:"Quote"},{small:"enter",shift:null,keyCode:"Enter"},{small:"del",shift:null,keyCode:"Delete"},{small:"shift",shift:null,keyCode:"ShiftLeft"},{small:"я",shift:"Я",keyCode:"KeyZ"},{small:"ч",shift:"Ч",keyCode:"KeyX"},{small:"с",shift:"С",keyCode:"KeyC"},{small:"м",shift:"М",keyCode:"KeyV"},{small:"и",shift:"И",keyCode:"KeyB"},{small:"т",shift:"Т",keyCode:"KeyN"},{small:"ь",shift:"Ь",keyCode:"KeyM"},{small:"б",shift:"Б",keyCode:"Comma"},{small:"ю",shift:"Ю",keyCode:"Period"},{small:".",shift:",",keyCode:"Slash"},{small:"shift",shift:null,keyCode:"ShiftRight"},{small:"ctrl",shift:null,keyCode:"ControlLeft"},{small:"win",shift:null,keyCode:"MetaLeft"},{small:"alt",shift:null,keyCode:"AltLeft"},{small:"",shift:null,keyCode:"Space"},{small:"alt",shift:null,keyCode:"AltRight"},{small:"ctrl",shift:null,keyCode:"ControlRight"},{small:"↑",shift:null,keyCode:"ArrowUp"},{small:"↓",shift:null,keyCode:"ArrowDown"},{small:"←",shift:null,keyCode:"ArrowLeft"},{small:"→",shift:null,keyCode:"ArrowRight"}],en:[{small:"`",shift:"~",keyCode:"Backquote"},{small:"1",shift:"!",keyCode:"Digit1"},{small:"2",shift:"@",keyCode:"Digit2"},{small:"3",shift:"#",keyCode:"Digit3"},{small:"4",shift:"$",keyCode:"Digit4"},{small:"5",shift:"%",keyCode:"Digit5"},{small:"6",shift:"^",keyCode:"Digit6"},{small:"7",shift:"&",keyCode:"Digit7"},{small:"8",shift:"*",keyCode:"Digit8"},{small:"9",shift:"(",keyCode:"Digit9"},{small:"0",shift:")",keyCode:"Digit0"},{small:"-",shift:"_",keyCode:"Minus"},{small:"=",shift:"+",keyCode:"Equal"},{small:"backspace",shift:null,keyCode:"Backspace"},{small:"tab",shift:null,keyCode:"Tab"},{small:"q",shift:"Q",keyCode:"KeyQ"},{small:"w",shift:"W",keyCode:"KeyW"},{small:"e",shift:"E",keyCode:"KeyE"},{small:"r",shift:"R",keyCode:"KeyR"},{small:"t",shift:"T",keyCode:"KeyT"},{small:"y",shift:"Y",keyCode:"KeyY"},{small:"u",shift:"U",keyCode:"KeyU"},{small:"i",shift:"I",keyCode:"KeyI"},{small:"o",shift:"O",keyCode:"KeyO"},{small:"p",shift:"P",keyCode:"KeyP"},{small:"[",shift:"{",keyCode:"BracketLeft"},{small:"]",shift:"}",keyCode:"BracketRight"},{small:"\\",shift:"|",keyCode:"Backslash"},{small:"caps lock",shift:null,keyCode:"CapsLock"},{small:"a",shift:"A",keyCode:"KeyA"},{small:"s",shift:"S",keyCode:"KeyS"},{small:"d",shift:"D",keyCode:"KeyD"},{small:"f",shift:"F",keyCode:"KeyF"},{small:"g",shift:"G",keyCode:"KeyG"},{small:"h",shift:"H",keyCode:"KeyH"},{small:"j",shift:"J",keyCode:"KeyJ"},{small:"k",shift:"K",keyCode:"KeyK"},{small:"l",shift:"L",keyCode:"KeyL"},{small:";",shift:":",keyCode:"Semicolon"},{small:"'",shift:'"',keyCode:"Quote"},{small:"enter",shift:null,keyCode:"Enter"},{small:"del",shift:null,keyCode:"Delete"},{small:"shift",shift:null,keyCode:"ShiftLeft"},{small:"z",shift:"Z",keyCode:"KeyZ"},{small:"x",shift:"X",keyCode:"KeyX"},{small:"c",shift:"C",keyCode:"KeyC"},{small:"v",shift:"V",keyCode:"KeyV"},{small:"b",shift:"B",keyCode:"KeyB"},{small:"n",shift:"N",keyCode:"KeyN"},{small:"m",shift:"M",keyCode:"KeyM"},{small:",",shift:"<",keyCode:"Comma"},{small:".",shift:">",keyCode:"Period"},{small:"/",shift:"?",keyCode:"Slash"},{small:"shift",shift:null,keyCode:"ShiftRight"},{small:"ctrl",shift:null,keyCode:"ControlLeft"},{small:"win",shift:null,keyCode:"MetaLeft"},{small:"alt",shift:null,keyCode:"AltLeft"},{small:"",shift:null,keyCode:"Space"},{small:"alt",shift:null,keyCode:"AltRight"},{small:"ctrl",shift:null,keyCode:"ControlRight"},{small:"↑",shift:null,keyCode:"ArrowUp"},{small:"↓",shift:null,keyCode:"ArrowDown"},{small:"←",shift:null,keyCode:"ArrowLeft"},{small:"→",shift:null,keyCode:"ArrowRight"}]};let i=0;let l=t("keyLang");null===l&&(e("keyLang","ru"),l="ru");const a=new class{constructor(e,t){this.keys=e,this.lang=t,this.main=document.createElement("div"),this.main.classList.add("main"),this.keyboard=document.createElement("div"),this.keyboard.classList.add("keyboard"),this.key=null,this.keyLang=[]}addInput(){this.text=document.createElement("textarea");this.text.rows="5",this.main.appendChild(this.text),document.body.appendChild(this.main)}init(e){this.keyboard.innerHTML="",this.btns=[],this.lang=e;let t=0,i=0;this.key=document.createElement("div"),this.key.classList.add("keyboards__key");const l=document.createElement("div");l.classList.add("arrows"),this.keys.forEach((e=>{const a=[],h=document.createElement("div");h.classList.add("row",`row-${t+=1}`),e.forEach((e=>{s[this.lang].forEach((t=>{if(t.keyCode===e)if(this.key=document.createElement("div"),this.key.classList.add("keyboards__key"),this.key.id=t.keyCode,this.key.id.match(/Space/)&&(this.key.style.width="310px"),this.key.id.match(/CapsLock/)&&this.key.classList.add("keyboards__key--caps"),this.key.id.match(/Backspace|Shift|Enter/)&&(this.key.style.width="100px"),this.key.id.match(/Alt|Meta|Control/)&&(this.key.style.width="68px"),this.key.id.match(/Caps|Enter/)&&(this.key.style.width="80px"),this.key.id.match(/Arrow/)){this.key.style.width="53px",this.key.style.height="23px",this.key.style.padding="5px",this.key.innerHTML=t.small;const e=document.createElement("div");e.classList.add(`arrou-${i+=1}`),e.append(this.key),l.appendChild(e),this.btns.push(this.key),a.push(this.key.id)}else this.btns.push(this.key),this.key.innerHTML=t.small,h.appendChild(this.key),h.appendChild(l),a.push(this.key.id)})),this.keyboard.appendChild(h)})),h.style.gridTemplateColumns=`repeat(${a.length}, 1fr)`})),this.main.appendChild(this.keyboard)}addRunKey(e){this.text.focus();let t=this.text.selectionStart;const s=this.text.value.slice(0,t),l=this.text.value.slice(t);e.stopPropaganation&&e.stopPropaganation();const{code:a,type:h}=e;this.btns.forEach((o=>{o.id===a&&(h.match(/keydown|mousedown/)?h.match(/down/)&&(h.match(/keydown/)&&(a.match(/Backspa|Delete/)||e.preventDefault()),o.classList.add("active"),o.id.match(/Key|Dig|Bracket|Slash|Backslash|Comma|Period|Quote|Semi|Arrow|Equal|Min|Backquote/)&&(t+=1,this.text.value=`${s}${o.textContent}${l}`,this.text.setSelectionRange(t,t)),o.id.match(/Tab/)&&(t+=4,this.text.value=`${s}    ${l}`,this.text.setSelectionRange(t,t)),o.id.match(/Ent/)&&(t+=1,this.text.value=`${s}\n${l}`,this.text.setSelectionRange(t,t)),o.id.match(/Space/)&&(t+=1,this.text.value=`${s} ${l}`,this.text.setSelectionRange(t,t)),h.match(/mousedown/)&&(o.id.match(/Backspace/)&&(t-=1,t<1&&(t=0),this.text.value=this.text.value.slice(0,t)+l,this.text.setSelectionRange(t,t)),o.id.match(/Delete/)&&(this.text.value=s+this.text.value.slice(t+1),this.text.setSelectionRange(t,t))),o.id.match(/Caps/)&&(i+=1,this.capsText(i),i%2==0&&(i=0)),o.id.match(/Shift/)&&(1===i?this.textUpLow("keyup"):this.textUpLow(h)),o.id.match(/Control|Alt/)&&this.keyLang.push(a)):h.match(/up/)&&(2===this.keyLang.length&&(this.keyLang.includes("AltLeft")||this.keyLang.includes("AltRight"))&&(this.keyLang.includes("ControlLeft")||this.keyLang.includes("ControlRight"))&&this.swichLang(),this.keyLang=[],o.id.match(/Shift/)&&(1===i?this.textUpLow("keydown"):this.textUpLow(h)),o.classList.remove("active"),i%2!=0?o.id.match(/Caps/)&&o.classList.add("active"):o.classList.remove("active")))}))}textUpLow=e=>{this.btns.forEach((t=>{s[this.lang].forEach((s=>{t.id.match(/Key|Dig|Bracket|Slash|Backslash|Backquote|Comma|Period|Quote|Semi|Equal|Min/)&&t.id===s.keyCode&&(e.match(/down/)?(t.innerHTML=s.shift,1===i&&"en"===this.lang?(t.id.match(/Digit|Min|Equ|Bracket|Comma|Period|Quote|Semi|Slash|Backslash|Backquote/)&&(t.innerHTML=s.shift),t.id.match(/Key/)&&(t.innerHTML=s.shift),t.id.match(/Digit|Min|Equ|Backslash|Slash|Backquote|Comma|Period|Bracket/)&&(t.innerHTML=s.small)):1===i&&"ru"===this.lang&&(t.id.match(/Key|Backquote|Bracket|Comma|Period|Quote|Semi/)&&(t.innerHTML=s.shift),t.id.match(/Digit|Min|Equ|Backslash|Slash/)&&(t.innerHTML=s.small))):e.match(/up/)&&(t.innerHTML=s.small,1===i&&"en"===this.lang?(t.id.match(/Key/)&&(t.innerHTML=s.small),t.id.match(/Digit|Min|Equ|Backslash|Slash|Backquote|Comma|Period|Bracket/)&&(t.innerHTML=s.shift)):1===i&&"ru"===this.lang&&(t.id.match(/Key|Backquote|Bracket|Comma|Period|Quote|Semi/)&&(t.innerHTML=s.small),t.id.match(/Digit|Min|Equ|Backslash|Slash/)&&(t.innerHTML=s.shift))))}))}))};capsText=e=>{this.btns.forEach((t=>{s[this.lang].forEach((s=>{"ru"===this.lang?t.id.match(/Key|Bracket|Comma|Period|Quote|Semi|Backquote/)&&t.id===s.keyCode&&(t.innerHTML=e%2!=0?s.shift:s.small):t.id.match(/Key/)&&t.id===s.keyCode&&(t.innerHTML=e%2!=0?s.shift:s.small)}))}))};swichLang=()=>{"ru"===t("keyLang")?(e("keyLang","en"),this.init(t("keyLang"))):(e("keyLang","ru"),this.init(t("keyLang")))};textDescr(){const e=document.createElement("div");e.classList.add("description"),e.innerHTML="This keyboard was created in Linux system,<br>\n    switch language with Ctrl+Alt keys.",this.main.appendChild(e)}}([["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"]]);window.addEventListener("DOMContentLoaded",(()=>{a.textDescr(),a.addInput(),a.init(l)})),document.addEventListener("keydown",(e=>a.addRunKey(e))),document.addEventListener("keyup",(e=>a.addRunKey(e))),document.addEventListener("mousedown",(e=>a.addRunKey({code:e.target.id,type:e.type}))),document.addEventListener("mouseup",(e=>a.addRunKey({code:e.target.id,type:e.type})))})();